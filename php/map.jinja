# -*- coding: utf-8 -*-
# vim: ft=jinja

{% set pillar_php_version = salt['pillar.get']('php:version', '7.0') %}
{%- if pillar_php_version is iterable and pillar_php_version is not string %}
    {%- set php_version = pillar_php_version[0]|string %}
{% else %}
    {%- set php_version = pillar_php_version|string %}
{% endif %}
{%- set freebsd_php_version = php_version.replace('.', '') %}

{%- if salt['grains.get']('os') == "Ubuntu" %}
    {%- set use_external_repo = salt['pillar.get']('php:use_external_repo', False) %}
    {%- if use_external_repo %}
        {%- if salt['grains.get']('osrelease')|string >= '16.04' %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Debian': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php' + php_version,
                            'apc': 'php-apcu',
                            'apcu': 'php-apcu-bc',
                            'bcmath': 'php' + php_version + '-bcmath',
                            'build_pkgs': [
                                'libssl-dev',
                                'libcurl4-openssl-dev',
                                'pkg-config',
                                'libsslcommon2-dev',
                                'gcc',
                                'make',
                                'autoconf',
                                'libc-dev',
                                'pkg-config',
                            ],
                            'bz2': 'php' + php_version + '-bz2',
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php' + php_version + '-cgi',
                            'cli': 'php' + php_version + '-cli',
                            'composer_bin': 'composer',
                            'console-table': 'php-console-table',
                            'curl': 'php' + php_version + '-curl',
                            'dba': 'php' + php_version + '-dba',
                            'dev': 'php' + php_version + '-dev',
                            'ext_conf_path': '/etc/php/' + php_version + '/mods-available',
                            'fpm': 'php' + php_version + '-fpm',
                            'gd': 'php' + php_version + '-gd',
                            'gearman': 'php-gearman',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gettext': 'php' + php_version,
                            'gmp': 'php' + php_version + '-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php-imagick',
                            'imap': 'php' + php_version + '-imap',
                            'intl': 'php' + php_version + '-intl',
                            'json': 'php' + php_version + '-json',
                            'ldap': 'php' + php_version + '-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php' + php_version + '-mbstring',
                            'mcrypt': 'php' + php_version + '-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongo': 'php-mongo',
                            'mongodb': 'php-mongodb',
                            'mysql': 'php' + php_version + '-mysql',
                            'mysqlnd': 'php' + php_version + '-mysql',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'odbc': 'php-odbc',
                            'opcache': 'php' + php_version + '-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php' + php_version + '-pgsql',
                            'php': 'php' + php_version,
                            'phpenmod_command': 'phpenmod -v' + php_version,
                            'pspell': 'php' + php_version + '-pspell',
                            'readline': 'php' + php_version + '-readline',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': ['php-phpseclib', 'php-seclib'],
                            'snmp': 'php' + php_version + '-snmp',
                            'soap': 'php' + php_version + '-soap',
                            'ssh2': 'php-ssh2',
                            'sqlite': 'php' + php_version + '-sqlite3',
                            'suhosin5_ext': 'suhosin.so',
                            'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                            'suhosin7_ext': 'suhosin7.so',
                            'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                            'sybase': 'php' + php_version + '-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php' + php_version + '-tidy',
                            'xdebug': 'php-xdebug',
                            'xml': ['php' + php_version + '-xml', 'php' + php_version + '-xmlrpc'],
                            'xsl': 'php' + php_version + '-xsl',
                            'zip': 'php' + php_version + '-zip',
                        },
                        'fpm': {
                            'conf': '/etc/php/' + php_version + '/fpm/php-fpm.conf',
                            'ini': '/etc/php/' + php_version + '/fpm/php.ini',
                            'pools': '/etc/php/' + php_version + '/fpm/pool.d',
                            'service': 'php' + php_version + '-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/run/php/php' + php_version + '-fpm.pid'),
                                    ('error_log', '/var/log/php' + php_version + '-fpm.log'),
                                ])),
                                ('include', '/etc/php/' + php_version + '/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php/' + php_version + '/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php/' + php_version + '/apache2/php.ini',
                        },
                    },
                }),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {},
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- else %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Debian': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php' + php_version,
                            'apc': 'php-apcu',
                            'apcu': 'php-apcu-bc',
                            'bcmath': 'php' + php_version + '-bcmath',
                            'bz2': 'php' + php_version + '-bz2',
                            'build_pkgs': ['libssl-dev', 'libcurl4-openssl-dev', 'gcc', 'make', 'autoconf', 'libc-dev', 'pkg-config'],
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php' + php_version + '-cgi',
                            'cli': 'php' + php_version + '-cli',
                            'composer_bin': 'composer',
                            'console-table': 'php-console-table',
                            'curl': 'php' + php_version + '-curl',
                            'dba': 'php' + php_version + '-dba',
                            'dev': 'php' + php_version + '-dev',
                            'ext_conf_path': '/etc/php/' + php_version + '/mods-available',
                            'fpm': 'php' + php_version + '-fpm',
                            'gd': 'php' + php_version + '-gd',
                            'gearman': 'php-gearman',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gettext': 'php' + php_version,
                            'gmp': 'php' + php_version + '-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php-imagick',
                            'imap': 'php' + php_version + '-imap',
                            'intl': 'php' + php_version + '-intl',
                            'json': 'php' + php_version + '-json',
                            'ldap': 'php' + php_version + '-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php' + php_version + '-mbstring',
                            'mcrypt': 'php' + php_version + '-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongo': 'php-mongo',
                            'mongodb': 'php-mongodb',
                            'mysql': 'php' + php_version + '-mysql',
                            'mysqlnd': 'php' + php_version + '-mysql',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'opcache': 'php' + php_version + '-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php' + php_version + '-pgsql',
                            'php': 'php' + php_version,
                            'phpenmod_command': 'phpenmod -v' + php_version,
                            'pspell': 'php' + php_version + '-pspell',
                            'readline': 'php' + php_version + '-readline',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': 'php-seclib',
                            'snmp': 'php' + php_version + '-snmp',
                            'soap': 'php' + php_version + '-soap',
                            'ssh2': 'php-ssh2',
                            'sqlite': 'php' + php_version + '-sqlite3',
                            'suhosin5_ext': 'suhosin.so',
                            'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                            'suhosin7_ext': 'suhosin7.so',
                            'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                            'sybase': 'php' + php_version + '-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php' + php_version + '-tidy',
                            'xdebug': 'php' + php_version + '-xdebug',
                            'xml': ['php' + php_version + '-xml', 'php' + php_version + '-xmlrpc'],
                            'xsl': 'php' + php_version + '-xsl',
                            'zip': 'php' + php_version + '-zip',
                        },
                        'fpm': {
                            'conf': '/etc/php/' + php_version + '/fpm/php-fpm.conf',
                            'ini': '/etc/php/' + php_version + '/fpm/php.ini',
                            'pools': '/etc/php/' + php_version + '/fpm/pool.d',
                            'service': 'php' + php_version + '-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php' + php_version + '-fpm.pid'),
                                    ('error_log', '/var/log/php' + php_version + '-fpm.log'),
                                ])),
                                ('include', '/etc/php/' + php_version + '/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php/' + php_version + '/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php/' + php_version + '/apache2/php.ini',
                        },
                    },
                }),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {},
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- endif %}
    {%- else %}
        {%- if salt['grains.get']('osrelease')|string >= '18.04' %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Ubuntu': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php',
                            'apc': 'php',
                            'apcu': 'php-apcu',
                            'bcmath': 'php7.2-bcmath',
                            'bz2': 'php7.2-bz2',
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php-cgi',
                            'cli': 'php-cli',
                            'console-table': 'php-console-table',
                            'composer_bin': 'composer',
                            'curl': 'php-curl',
                            'dev': 'php7.2-dev',
                            'dba': 'php7.2-dba',
                            'fpm': 'php-fpm',
                            'gd': 'php-gd',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gmp': 'php-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php-imagick',
                            'imap': 'php-imap',
                            'intl': 'php-intl',
                            'json': 'php-json',
                            'ldap': 'php-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php-mbstring',
                            'mcrypt': 'php-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongodb': 'php-mongodb',
                            'mysql': 'php-mysql',
                            'mysqlnd': 'php',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'odbc': 'php-odbc',
                            'opcache': 'php7.2-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php-pgsql',
                            'php': 'php',
                            'phpenmod_command': 'phpenmod',
                            'pspell': 'php-pspell',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': ['php-phpseclib', 'php-seclib'],
                            'snmp': 'php-snmp',
                            'soap': 'php-soap',
                            'sqlite': 'php-sqlite3',
                            'ssh2': 'php-ssh2',
                            'suhosin': 'php',
                            'sybase': 'php-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php7.2-tidy',
                            'xcache': 'php',
                            'xdebug': 'php-xdebug',
                            'xml': ['php-xml', 'php-xmlrpc'],
                            'xsl': 'php7.2-xsl',
                            'zip': 'php-zip',
                        },
                        'fpm': {
                            'conf': '/etc/php/7.2/fpm/php-fpm.conf',
                            'ini': '/etc/php/7.2/fpm/php.ini',
                            'pools': '/etc/php/7.2/fpm/pool.d',
                            'service': 'php7.2-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php7.2-fpm.pid'),
                                    ('error_log', '/var/log/php7.2-fpm.log'),
                                ])),
                                ('include', '/etc/php/7.2/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php/7.2/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php/7.2/apache2/php.ini',
                        },
                        'xcache': {
                            'ini': '/etc/php/7.2/mods-available/xcache.ini',
                            'defaults': {},
                        },
                    },
                }, grain="os"),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {
                        'default.conf': {
                            'enabled': False,
                            'opts': {},
                        },
                    },
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'xcache': {
                    'ini': {
                        'defaults': {
                            'xcache-common': {
                                'extension':  'xcache.so',
                            },
                            'xcache.admin': {
                                'xcache.admin.enable_auth': 'On',
                            },
                            'xcache': {
                                'xcache.shm_scheme':  '"mmap"',
                                'xcache.size':  '60M',
                                'xcache.count': '1',
                                'xcache.slots': '8K',
                                'xcache.ttl': '0',
                                'xcache.gc_interval': '0',
                                'xcache.var_size':  '4M',
                                'xcache.var_count': '1',
                                'xcache.var_slots': '8K',
                                'xcache.var_ttl': '0',
                                'xcache.var_maxttl':  '0',
                                'xcache.var_gc_interval': '300',
                                'xcache.var_namespace_mode':  '0',
                                'xcache.var_namespace': '""',
                                'xcache.readonly_protection': 'Off',
                                'xcache.mmap_path': '"/dev/zero"',
                                'xcache.coredump_directory':  '""',
                                'xcache.coredump_type': '0',
                                'xcache.disable_on_crash':  'Off',
                                'xcache.experimental':  'Off',
                                'xcache.cacher':  'On',
                                'xcache.stat':  'On',
                                'xcache.optimizer': 'Off',
                            },
                            'xcache.coverager': {
                                'xcache.coverager': 'Off',
                                'xcache.coverager_autostart': 'On',
                                'xcache.coveragedump_directory':  '""',
                            },
                        },
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- elif salt['grains.get']('osrelease')|string >= '17.10' %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Ubuntu': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php',
                            'apc': 'php',
                            'apcu': 'php-apcu',
                            'bcmath': 'php7.1-bcmath',
                            'bz2': 'php7.1-bz2',
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php-cgi',
                            'cli': 'php-cli',
                            'console-table': 'php-console-table',
                            'composer_bin': 'composer',
                            'curl': 'php-curl',
                            'dba': 'php7.1-dba',
                            'dev': 'php7.1-dev',
                            'fpm': 'php-fpm',
                            'gd': 'php-gd',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gmp': 'php-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php-imagick',
                            'imap': 'php-imap',
                            'intl': 'php-intl',
                            'json': 'php-json',
                            'ldap': 'php-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php-mbstring',
                            'mcrypt': 'php-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongodb': 'php-mongodb',
                            'mysql': 'php-mysql',
                            'mysqlnd': 'php',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'opcache': 'php7.1-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php-pgsql',
                            'php': 'php',
                            'phpenmod_command': 'phpenmod',
                            'pspell': 'php-pspell',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': ['php-phpseclib', 'php-seclib'],
                            'snmp': 'php-snmp',
                            'soap': 'php-soap',
                            'sqlite': 'php-sqlite3',
                            'ssh2': 'php-ssh2',
                            'suhosin': 'php',
                            'sybase': 'php-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php7.1-tidy',
                            'xcache': 'php',
                            'xdebug': 'php-xdebug',
                            'xml': ['php-xml', 'php-xmlrpc'],
                            'xsl': 'php7.1-xsl',
                            'zip': 'php-zip',
                        },
                        'fpm': {
                            'conf': '/etc/php/7.1/fpm/php-fpm.conf',
                            'ini': '/etc/php/7.1/fpm/php.ini',
                            'pools': '/etc/php/7.1/fpm/pool.d',
                            'service': 'php7.1-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php7.1-fpm.pid'),
                                    ('error_log', '/var/log/php7.1-fpm.log'),
                                ])),
                                ('include', '/etc/php/7.1/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php/7.1/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php/7.1/apache2/php.ini',
                        },
                        'xcache': {
                            'ini': '/etc/php/7.1/mods-available/xcache.ini',
                            'defaults': {},
                        },
                    },
                }, grain="os"),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {
                        'default.conf': {
                            'enabled': False,
                            'opts': {},
                        },
                    },
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'xcache': {
                    'ini': {
                        'defaults': {
                            'xcache-common': {
                                'extension':  'xcache.so',
                            },
                            'xcache.admin': {
                                'xcache.admin.enable_auth': 'On',
                            },
                            'xcache': {
                                'xcache.shm_scheme':  '"mmap"',
                                'xcache.size':  '60M',
                                'xcache.count': '1',
                                'xcache.slots': '8K',
                                'xcache.ttl': '0',
                                'xcache.gc_interval': '0',
                                'xcache.var_size':  '4M',
                                'xcache.var_count': '1',
                                'xcache.var_slots': '8K',
                                'xcache.var_ttl': '0',
                                'xcache.var_maxttl':  '0',
                                'xcache.var_gc_interval': '300',
                                'xcache.var_namespace_mode':  '0',
                                'xcache.var_namespace': '""',
                                'xcache.readonly_protection': 'Off',
                                'xcache.mmap_path': '"/dev/zero"',
                                'xcache.coredump_directory':  '""',
                                'xcache.coredump_type': '0',
                                'xcache.disable_on_crash':  'Off',
                                'xcache.experimental':  'Off',
                                'xcache.cacher':  'On',
                                'xcache.stat':  'On',
                                'xcache.optimizer': 'Off',
                            },
                            'xcache.coverager': {
                                'xcache.coverager': 'Off',
                                'xcache.coverager_autostart': 'On',
                                'xcache.coveragedump_directory':  '""',
                            },
                        },
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- elif salt['grains.get']('osrelease')|string >= '16.04' %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Ubuntu': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php',
                            'apc': 'php',
                            'apcu': 'php-apcu',
                            'bcmath': 'php7.0-bcmath',
                            'bz2': 'php7.0-bz2',
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php-cgi',
                            'cli': 'php-cli',
                            'console-table': 'php-console-table',
                            'composer_bin': 'composer',
                            'curl': 'php-curl',
                            'dba': 'php7.0-dba',
                            'dev': 'php7.0-dev',
                            'fpm': 'php-fpm',
                            'gd': 'php-gd',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gmp': 'php-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php-imagick',
                            'imap': 'php-imap',
                            'intl': 'php-intl',
                            'json': 'php-json',
                            'ldap': 'php-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php-mbstring',
                            'mcrypt': 'php-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongodb': 'php-mongodb',
                            'mysql': 'php-mysql',
                            'mysqlnd': 'php',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'opcache': 'php7.0-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php-pgsql',
                            'php': 'php',
                            'phpenmod_command': 'phpenmod',
                            'pspell': 'php-pspell',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': ['php-phpseclib', 'php-seclib'],
                            'snmp': 'php-snmp',
                            'soap': 'php-soap',
                            'sqlite': 'php-sqlite3',
                            'ssh2': 'php-ssh2',
                            'suhosin': 'php',
                            'sybase': 'php-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php7.0-tidy',
                            'xcache': 'php',
                            'xdebug': 'php-xdebug',
                            'xml': ['php-xml', 'php-xmlrpc'],
                            'xsl': 'php7.0-xsl',
                            'zip': 'php-zip',
                        },
                        'fpm': {
                            'conf': '/etc/php/7.0/fpm/php-fpm.conf',
                            'ini': '/etc/php/7.0/fpm/php.ini',
                            'pools': '/etc/php/7.0/fpm/pool.d',
                            'service': 'php7.0-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php7.0-fpm.pid'),
                                    ('error_log', '/var/log/php7.0-fpm.log'),
                                ])),
                                ('include', '/etc/php/7.0/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php/7.0/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php/7.0/apache2/php.ini',
                        },
                        'xcache': {
                            'ini': '/etc/php/7.0/mods-available/xcache.ini',
                            'defaults': {},
                        },
                    },
                }, grain="os"),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {
                        'default.conf': {
                            'enabled': False,
                            'opts': {},
                        },
                    },
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'xcache': {
                    'ini': {
                        'defaults': {
                            'xcache-common': {
                                'extension':  'xcache.so',
                            },
                            'xcache.admin': {
                                'xcache.admin.enable_auth': 'On',
                            },
                            'xcache': {
                                'xcache.shm_scheme':  '"mmap"',
                                'xcache.size':  '60M',
                                'xcache.count': '1',
                                'xcache.slots': '8K',
                                'xcache.ttl': '0',
                                'xcache.gc_interval': '0',
                                'xcache.var_size':  '4M',
                                'xcache.var_count': '1',
                                'xcache.var_slots': '8K',
                                'xcache.var_ttl': '0',
                                'xcache.var_maxttl':  '0',
                                'xcache.var_gc_interval': '300',
                                'xcache.var_namespace_mode':  '0',
                                'xcache.var_namespace': '""',
                                'xcache.readonly_protection': 'Off',
                                'xcache.mmap_path': '"/dev/zero"',
                                'xcache.coredump_directory':  '""',
                                'xcache.coredump_type': '0',
                                'xcache.disable_on_crash':  'Off',
                                'xcache.experimental':  'Off',
                                'xcache.cacher':  'On',
                                'xcache.stat':  'On',
                                'xcache.optimizer': 'Off',
                            },
                            'xcache.coverager': {
                                'xcache.coverager': 'Off',
                                'xcache.coverager_autostart': 'On',
                                'xcache.coveragedump_directory':  '""',
                            },
                        },
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- else %}
            {%- set php = salt['pillar.get']('php', {
                'lookup': salt['grains.filter_by']({
                    'Ubuntu': {
                        'pkgs': {
                            'adodb': 'php5-adodb',
                            'apache2': 'libapache2-mod-php5',
                            'apc': 'php-apc',
                            'apcu': 'php5-apcu',
                            'bcmath': 'php5',
                            'build_pkgs': ['libssl-dev', 'libcurl4-openssl-dev'],
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php5-cgi',
                            'cli': 'php5-cli',
                            'composer_bin': 'composer',
                            'console-table': 'php-console-table',
                            'curl': 'php5-curl',
                            'dev': ['php5-dev','build-essential'],
                            'ext_conf_path': salt['grains.filter_by']({
                                'precise': '/etc/php5/conf.d',
                                'default': '/etc/php5/mods-available',
                            }, grain='oscodename'),
                            'fpm': 'php5-fpm',
                            'gd': 'php5-gd',
                            'gearman': 'php5-gearman',
                            'geoip': 'php5-geoip',
                            'geshi': 'php-geshi',
                            'gettext': 'php-gettext',
                            'gmp': 'php5-gmp',
                            'hhvm': 'hhvm',
                            'imagick': 'php5-imagick',
                            'imap': 'php5-imap',
                            'intl': 'php5-intl',
                            'json': 'php5-json',
                            'ldap': 'php5-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php5',
                            'mcrypt': 'php5-mcrypt',
                            'mdb2': 'php-mdb2',
                            'mdb2-driver-mysql': 'php-mdb2-driver-mysql',
                            'mdb2-driver-pgsql': 'php-mdb2-driver-pgsql',
                            'memcache': 'php5-memcache',
                            'memcached': 'php5-memcached',
                            'mongodb': salt['grains.filter_by']({
                              'trusty': 'php5-mongo',
                              'default': '',
                            }, grain='oscodename'),
                            'mysql': 'php5-mysql',
                            'mysqlnd': 'php5-mysqlnd',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php5-oauth',
                            'opcache': 'php5',
                            'pear': 'php-pear',
                            'pgsql': 'php5-pgsql',
                            'php': 'php5',
                            'phpenmod_command': salt['grains.filter_by']({
                                'precise': 'true',
                                'default': 'php5enmod',
                            }, grain='oscodename'),
                            'pspell': 'php5-pspell',
                            'redis': 'php5-redis',
                            'seclib': 'php-seclib',
                            'snmp': 'php5-snmp',
                            'soap': 'php-soap',
                            'sqlite': 'php5-sqlite',
                            'ssh2': 'libssh2-php',
                            'suhosin5_ext': 'suhosin.so',
                            'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                            'suhosin7_ext': 'suhosin7.so',
                            'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                            'svn': 'php5-svn',
                            'tcpdf': 'php-tcpdf',
                            'tidy': 'php5-tidy',
                            'temp_dir': '/tmp',
                            'xcache': 'php5-xcache',
                            'xdebug': 'php5-xdebug',
                            'xml': 'php5',
                            'xsl': 'php5-xsl',
                            'zip': 'php5',
                        },
                        'fpm': {
                            'conf': '/etc/php5/fpm/php-fpm.conf',
                            'ini': '/etc/php5/fpm/php.ini',
                            'pools': '/etc/php5/fpm/pool.d',
                            'service': 'php5-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php5-fpm.pid'),
                                    ('error_log', '/var/log/php5-fpm.log'),
                                ])),
                                ('include', '/etc/php5/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': '/etc/php5/cli/php.ini',
                        },
                        'apache2': {
                            'ini': '/etc/php5/apache2/php.ini',
                        },
                        'xcache': {
                            'ini': '/etc/php5/mods-available/xcache.ini',
                            'defaults': {},
                        },
                    },
                }, grain="os"),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {
                        'default.conf': {
                            'enabled': False,
                            'opts': {},
                        },
                    },
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'xcache': {
                    'ini': {
                        'defaults': {
                            'xcache-common': {
                                'extension':  'xcache.so',
                            },
                            'xcache.admin': {
                                'xcache.admin.enable_auth': 'On',
                            },
                            'xcache': {
                                'xcache.shm_scheme':  '"mmap"',
                                'xcache.size':  '60M',
                                'xcache.count': '1',
                                'xcache.slots': '8K',
                                'xcache.ttl': '0',
                                'xcache.gc_interval': '0',
                                'xcache.var_size':  '4M',
                                'xcache.var_count': '1',
                                'xcache.var_slots': '8K',
                                'xcache.var_ttl': '0',
                                'xcache.var_maxttl':  '0',
                                'xcache.var_gc_interval': '300',
                                'xcache.var_namespace_mode':  '0',
                                'xcache.var_namespace': '""',
                                'xcache.readonly_protection': 'Off',
                                'xcache.mmap_path': '"/dev/zero"',
                                'xcache.coredump_directory':  '""',
                                'xcache.coredump_type': '0',
                                'xcache.disable_on_crash':  'Off',
                                'xcache.experimental':  'Off',
                                'xcache.cacher':  'On',
                                'xcache.stat':  'On',
                                'xcache.optimizer': 'Off',
                            },
                            'xcache.coverager': {
                                'xcache.coverager': 'Off',
                                'xcache.coverager_autostart': 'On',
                                'xcache.coveragedump_directory':  '""',
                            },
                        },
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
            }, merge=True) %}
        {%- endif %}
    {%- endif %}
{%- elif salt['grains.get']('os') == "Debian" %}
    {%- if php_version|string == '5' %}
      {%- set confdir = '/etc/php5' %}
    {%- else %}
      {%- set confdir = '/etc/php/' + php_version %}
    {%- endif %}
    {%- set php = salt['pillar.get']('php', {
    'lookup': salt['grains.filter_by']({
                    'Debian': {
                        'pkgs': {
                            'adodb': 'libphp-adodb',
                            'apache2': 'libapache2-mod-php' + php_version,
                            'apc': 'php-apcu',
                            'apcu': 'php-apcu-bc',
                            'bcmath': 'php' + php_version + '-bcmath',
                            'bz2': 'php' + php_version + '-bz2',
                            'build_pkgs': [
                                'libssl-dev',
                                'libcurl4-openssl-dev',
                                'pkg-config',
                                'libsslcommon2-dev',
                                'gcc',
                                'make',
                                'autoconf',
                                'libc-dev',
                                'pkg-config',
                            ],
                            'cache-lite': 'php-cache-lite',
                            'cgi': 'php' + php_version + '-cgi',
                            'cli': 'php' + php_version + '-cli',
                            'composer_bin': 'composer',
                            'console-table': 'php-console-table',
                            'curl': 'php' + php_version + '-curl',
                            'dba': 'php' + php_version + '-dba',
                            'dev': 'php' + php_version + '-dev',
                            'ext_conf_path': '/etc/php/' + php_version + '/mods-available',
                            'fpm': 'php' + php_version + '-fpm',
                            'gd': 'php' + php_version + '-gd',
                            'gearman': 'php-gearman',
                            'geoip': 'php-geoip',
                            'geshi': 'php-geshi',
                            'gettext': 'php' + php_version,
                            'gmp': 'php' + php_version + '-gmp',
                            'hhvm': 'hhvm',
                            'igbinary': 'php-igbinary',
                            'imagick': 'php-imagick',
                            'imap': 'php' + php_version + '-imap',
                            'intl': 'php' + php_version + '-intl',
                            'json': 'php' + php_version + '-json',
                            'ldap': 'php' + php_version + '-ldap',
                            'local_bin': '/usr/local/bin',
                            'auth-sasl': 'php-auth-sasl',
                            'mail': 'php-mail',
                            'mbstring': 'php' + php_version + '-mbstring',
                            'mcrypt': 'php' + php_version + '-mcrypt',
                            'memcache': 'php-memcache',
                            'memcached': 'php-memcached',
                            'mongo': 'php-mongo',
                            'mongodb': 'php-mongodb',
                            'msgpack': 'php-msgpack',
                            'mysql': 'php' + php_version + '-mysql',
                            'mysqlnd': 'php' + php_version + '-mysql',
                            'net-smtp': 'php-net-smtp',
                            'net4': 'php-net-ipv4',
                            'net6': 'php-net-ipv6',
                            'oauth': 'php-oauth',
                            'odbc': 'php-odbc',
                            'opcache': 'php' + php_version + '-opcache',
                            'pear': 'php-pear',
                            'pgsql': 'php' + php_version + '-pgsql',
                            'php': 'php' + php_version,
                            'phpenmod_command': 'phpenmod -v' + php_version,
                            'pspell': 'php' + php_version + '-pspell',
                            'readline': 'php' + php_version + '-readline',
                            'redis': 'php' + php_version + '-redis',
                            'seclib': ['php-phpseclib', 'php-seclib'],
                            'snmp': 'php' + php_version + '-snmp',
                            'soap': 'php' + php_version + '-soap',
                            'ssh2': 'php-ssh2',
                            'sqlite': 'php' + php_version + '-sqlite3',
                            'suhosin5_ext': 'suhosin.so',
                            'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                            'suhosin7_ext': 'suhosin7.so',
                            'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                            'sybase': 'php' + php_version + '-sybase',
                            'tcpdf': 'php-tcpdf',
                            'temp_dir': '/tmp',
                            'tidy': 'php' + php_version + '-tidy',
                            'xdebug': 'php-xdebug',
                            'xml': ['php' + php_version + '-xml', 'php' + php_version + '-xmlrpc'],
                            'xsl': 'php' + php_version + '-xsl',
                            'zip': 'php' + php_version + '-zip',
                        },
                        'fpm': {
                            'conf': confdir + '/fpm/php-fpm.conf',
                            'ini': confdir + '/fpm/php.ini',
                            'pools': confdir +  '/fpm/pool.d',
                            'user': 'root',
                            'group': 'root',
                            'service': 'php' + php_version + '-fpm',
                            'user': 'root',
                            'group': 'root',
                            'defaults': odict([
                                ('global', odict([
                                    ('pid', '/var/run/php' + php_version + '-fpm.pid'),
                                    ('error_log', '/var/log/php' + php_version + '-fpm.log'),
                                ])),
                                ('include', confdir + '/fpm/pool.d/*.conf'),
                            ]),
                        },
                        'hhvm': {
                            'conf': '/etc/hhvm/server.ini',
                            'ini': '/etc/hhvm/php.ini',
                            'service': 'hhvm',
                            'defaults': {},
                            'server': odict([
                                ('pid', '/var/run/hhvm/pid'),
                                ('hhvm.server.port', '9000'),
                                ('hhvm.server.type', 'fastcgi'),
                                ('hhvm.server.default_document', 'index.php'),
                                ('hhvm.log.use_log_file', 'true'),
                                ('hhvm.log.file', '/var/log/hhvm/error.log'),
                                ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                            ]),
                            'php': odict([
                                ('session.save_handler', 'files'),
                                ('session.save_path', '/var/lib/hhvm/sessions'),
                                ('session.gc_maxlifetime', '1440'),
                                ('hhvm.log.level', 'Warning'),
                                ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                                ('hhvm.log.runtime_error_reporting_level', '8191'),
                                ('hhvm.mysql.typed_results', 'false'),
                            ]),
                        },
                        'cli': {
                            'ini': confdir + '/cli/php.ini',
                        },
                        'apache2': {
                            'ini': confdir + '/apache2/php.ini',
                        },
                    },
                }),
                'fpm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'ini': {
                            'opts': {},
                            'settings': {},
                        },
                        'conf': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                    'pools': {},
                },
                'hhvm': {
                    'service': {
                        'enabled': True,
                        'opts': {},
                    },
                    'config': {
                        'server': {
                            'opts': {},
                            'settings': {},
                        },
                        'php': {
                            'opts': {},
                            'settings': {},
                        },
                    },
                },
                'cli': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'apache2': {
                    'ini': {
                        'opts': {},
                        'settings': {},
                    }
                },
                'ini': {
                    'defaults': {
                        'PHP': {
                            'allow_url_fopen': 'On',
                            'allow_url_include': 'Off',
                            'asp_tags': 'Off',
                            'auto_globals_jit': 'On',
                            'default_mimetype': '"text/html"',
                            'default_socket_timeout': 60,
                            'disable_functions': [
                                'pcntl_alarm',
                                'pcntl_fork',
                                'pcntl_waitpid',
                                'pcntl_wait',
                                'pcntl_wifexited',
                                'pcntl_wifstopped',
                                'pcntl_wifsignaled',
                                'pcntl_wexitstatus',
                                'pcntl_wtermsig',
                                'pcntl_wstopsig',
                                'pcntl_signal',
                                'pcntl_signal_dispatch',
                                'pcntl_get_last_error',
                                'pcntl_strerror',
                                'pcntl_sigprocmask',
                                'pcntl_sigwaitinfo',
                                'pcntl_sigtimedwait',
                                'pcntl_exec',
                                'pcntl_getpriority',
                                'pcntl_setpriority',
                            ],
                            'display_errors': 'Off',
                            'display_startup_errors': 'Off',
                            'enable_dl': 'Off',
                            'engine': 'On',
                            'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                            'expose_php': 'On',
                            'file_uploads': 'On',
                            'html_errors': 'On',
                            'ignore_repeated_errors': 'Off',
                            'ignore_repeated_source': 'Off',
                            'implicit_flush': 'Off',
                            'log_errors': 'On',
                            'log_errors_max_len': 1024,
                            'max_execution_time': 30,
                            'max_file_uploads': 20,
                            'max_input_nesting_level': 64,
                            'max_input_time': 60,
                            'max_input_vars': 1000,
                            'memory_limit': '128M',
                            'output_buffering': 4096,
                            'post_max_size': '8M',
                            'precision': 14,
                            'register_argc_argv': 'Off',
                            'report_memleaks': 'On',
                            'request_order': 'GP',
                            'serialize_precision': 17,
                            'short_open_tag': 'Off',
                            'track_errors': 'Off',
                            'upload_max_filesize': '2M',
                            'variables_order': 'GPCS',
                            'zend.enable_gc': 'On',
                            'zlib.output_compression': 'Off',
                        },
                        'CLI Server': {
                            'cli_server.color': 'On'
                        },
                        'Date': {
                            'date.timezone': 'America/New_York'
                        },
                        'Pdo_mysql': {
                            'pdo_mysql.cache_size': 2000
                        },
                        'mail function': {
                            'SMTP': 'localhost',
                            'mail.add_x_header': 'On'
                        },
                        'SQL': {
                            'sql.safe_mode': 'Off'
                        },
                        'ODBC': {
                            'odbc.allow_persistent': 'On',
                            'odbc.check_persistent': 'On',
                            'odbc.max_persistent': '-1',
                            'odbc.max_links': '-1',
                            'odbc.defaultlrl': 4096,
                            'odbc.defaultbinmode': 1
                        },
                        'Interbase': {
                            'ibase.allow_persistent': 1,
                            'ibase.max_persistent': -1,
                            'ibase.max_links': -1,
                            'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                            'ibase.dateformat': '"%Y-%m-%d"',
                            'ibase.timeformat': '"%H:%M:%S"'
                        },
                        'MySQL': {
                            'mysql.allow_local_infile': 'On',
                            'mysql.allow_persistent': 'On',
                            'mysql.cache_size': '2000',
                            'mysql.max_persistent': -1,
                            'mysql.max_links': -1,
                            'mysql.connect_timeout': 60,
                            'mysql.trace_mode': 'Off'
                        },
                        'MySQLi': {
                            'mysqli.max_persistent': -1,
                            'mysqli.allow_persistent': 'On',
                            'mysqli.max_links': -1,
                            'mysqli.cache_size': 2000,
                            'mysqli.default_port': 3306,
                            'mysqli.reconnect': 'Off'
                        },
                        'mysqlnd': {
                            'mysqlnd.collect_statistics': 'On',
                            'mysqlnd.collect_memory_statistics': 'Off'
                        },
                        'PostgreSQL': {
                            'pgsql.allow_persistent': 'On',
                            'pgsql.auto_reset_persistent': 'Off',
                            'pgsql.max_persistent': -1,
                            'pgsql.max_links': -1,
                            'pgsql.ignore_notice': 0,
                            'pgsql.log_notice': 0
                        },
                        'Sybase-CT': {
                            'sybct.allow_persistent': 'On',
                            'sybct.max_persistent': -1,
                            'sybct.max_links': -1,
                            'sybct.min_server_severity': 10,
                            'sybct.min_client_severity': 10
                        },
                        'bcmath': {
                            'bcmath.scale': 0
                        },
                        'Session': {
                            'session.save_handler': 'files',
                            'session.use_strict_mode': 0,
                            'session.use_cookies': 1,
                            'session.use_only_cookies': 1,
                            'session.name': 'PHPSESSID',
                            'session.auto_start': 0,
                            'session.cookie_lifetime': 0,
                            'session.cookie_path': '/',
                            'session.serialize_handler': 'php',
                            'session.gc_probability': 0,
                            'session.gc_divisor': 1000,
                            'session.gc_maxlifetime': 1440,
                            'session.bug_compat_42': 'Off',
                            'session.bug_compat_warn': 'Off',
                            'session.cache_limiter': 'nocache',
                            'session.cache_expire': '180',
                            'session.use_trans_sid': 0,
                            'session.hash_function': 0,
                            'session.hash_bits_per_character': 5,
                            'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                        },
                        'MSSQL': {
                            'mssql.allow_persistent': 'On',
                            'mssql.max_persistent': -1,
                            'mssql.max_links': -1,
                            'mssql.min_error_severity': 10,
                            'mssql.min_message_severity': 10,
                            'mssql.compatibility_mode': 'Off',
                            'mssql.secure_connection': 'Off'
                        },
                        'Tidy': {
                            'tidy.clean_output': 'Off'
                        },
                        'soap': {
                            'soap.wsdl_cache_enabled': 1,
                            'soap.wsdl_cache_dir': '"/tmp"',
                            'soap.wsdl_cache_ttl': 86400,
                            'soap.wsdl_cache_limit': 5
                        },
                        'ldap': {
                            'ldap.max_links': -1
                        },
                    },
                },
    }, merge=True) %}
{%- else %}
    {%- set useversion = php_version | replace('.', '-') -%}
    {#- Red Hat Softwarecollection prefix lookup belongs to the Red Hat part
       further down but has to go here due to Jinja parsing rules. -#}
    {%- if salt['pillar.get']('php:use_scl_repo', False) -%}
      {%- set rh_prefix = 'rh-php{}-'.format(salt['pillar.get']('php:scl_php_version', '')) -%}
      {%- set sclo_prefix = 'sclo-php{}-'.format(salt['pillar.get']('php:scl_php_version', '')) -%}
      {%- set path_suffix = 'opt/rh/rh-php{}/'.format(salt['pillar.get']('php:scl_php_version', '')) -%}
    {%- else -%}
      {%- set rh_prefix = '' -%}
      {%- set sclo_prefix = '' -%}
      {%- set path_suffix = '' -%}
    {%- endif -%}
    {%- set php = salt['pillar.get']('php', {
        'lookup': salt['grains.filter_by']({
            'Debian': {
                'pkgs': {
                    'adodb': 'php5-adodb',
                    'apache2': 'libapache2-mod-php5',
                    'apc': 'php-apc',
                    'apcu': 'php5-apcu',
                    'bcmath': 'php5',
                    'build_pkgs': ['libssl-dev', 'libcurl4-openssl-dev'],
                    'bz2': 'php5-bz2',
                    'cache-lite': 'php-cache-lite',
                    'cgi': 'php5-cgi',
                    'cli': 'php5-cli',
                    'console-table': 'php-console-table',
                    'composer_bin': 'composer',
                    'curl': 'php5-curl',
                    'dba': 'php5-dba',
                    'dev': ['php5-dev','build-essential'],
                    'ext_conf_path': '/etc/php5/mods-available',
                    'fpm': 'php5-fpm',
                    'gd': 'php5-gd',
                    'gearman': 'php5-gearman',
                    'geoip': 'php5-geoip',
                    'geshi': 'php-geshi',
                    'gettext': 'php-gettext',
                    'gmp': 'php5-gmp',
                    'hhvm': 'hhvm',
                    'imagick': 'php5-imagick',
                    'imap': 'php5-imap',
                    'intl': 'php5-intl',
                    'json': 'php5-json',
                    'ldap': 'php5-ldap',
                    'local_bin': '/usr/local/bin',
                    'auth-sasl': 'php-auth-sasl',
                    'mail': 'php-mail',
                    'mbstring': 'php5',
                    'mcrypt': 'php5-mcrypt',
                    'mdb2': 'php-mdb2',
                    'mdb2-driver-mysql': 'php-mdb2-driver-mysql',
                    'mdb2-driver-pgsql': 'php-mdb2-driver-pgsql',
                    'memcache': 'php5-memcache',
                    'memcached': 'php5-memcached',
                    'mysql': 'php5-mysql',
                    'mysqlnd': 'php5-mysqlnd',
                    'net-smtp': 'php-net-smtp',
                    'net4': 'php-net-ipv4',
                    'net6': 'php-net-ipv6',
                    'oauth': 'php5-oauth',
                    'odbc': 'php-odbc',
                    'opcache': 'php5',
                    'pear': 'php-pear',
                    'pgsql': 'php5-pgsql',
                    'php': 'php5',
                    'phpenmod_command': 'php5enmod',
                    'pspell': 'php5-pspell',
                    'redis': 'php5-redis',
                    'seclib': 'php-seclib',
                    'snmp': 'php5-snmp',
                    'soap': 'php-soap',
                    'sqlite': 'php5-sqlite',
                    'ssh2': 'php5-ssh2',
                    'suhosin5_ext': 'suhosin.so',
                    'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                    'suhosin7_ext': 'suhosin7.so',
                    'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                    'svn': 'php5-svn',
                    'sybase': 'php5-sybase',
                    'tcpdf': 'php-tcpdf',
                    'temp_dir': '/tmp',
                    'tidy': 'php5-tidy',
                    'uuid': 'php-uuid',
                    'xcache': 'php5-xcache',
                    'xdebug': 'php5-xdebug',
                    'xml': 'php5',
                    'xsl': 'php5-xsl',
                    'zip': 'php5',
                },
                'fpm': {
                    'conf': '/etc/php5/fpm/php-fpm.conf',
                    'ini': '/etc/php5/fpm/php.ini',
                    'pools': '/etc/php5/fpm/pool.d',
                    'service': 'php5-fpm',
                    'user': 'root',
                    'group': 'root',
                    'defaults': odict([
                        ('global', odict([
                            ('pid', '/var/run/php5-fpm.pid'),
                            ('error_log', '/var/log/php5-fpm.log'),
                        ])),
                        ('include', '/etc/php5/fpm/pool.d/*.conf'),
                    ]),
                },
                'hhvm': {
                    'conf': '/etc/hhvm/server.ini',
                    'ini': '/etc/hhvm/php.ini',
                    'service': 'hhvm',
                    'defaults': {},
                    'server': odict([
                        ('pid', '/var/run/hhvm/pid'),
                        ('hhvm.server.port', '9000'),
                        ('hhvm.server.type', 'fastcgi'),
                        ('hhvm.server.default_document', 'index.php'),
                        ('hhvm.log.use_log_file', 'true'),
                        ('hhvm.log.file', '/var/log/hhvm/error.log'),
                        ('hhvm.repo.central.path', '/var/run/hhvm/hhvm.hhbc'),
                    ]),
                    'php': odict([
                        ('session.save_handler', 'files'),
                        ('session.save_path', '/var/lib/hhvm/sessions'),
                        ('session.gc_maxlifetime', '1440'),
                        ('hhvm.log.level', 'Warning'),
                        ('hhvm.log.always_log_unhandled_exceptions', 'true'),
                        ('hhvm.log.runtime_error_reporting_level', '8191'),
                        ('hhvm.mysql.typed_results', 'false'),
                    ]),
                },
                'cli': {
                    'ini': '/etc/php5/cli/php.ini',
                },
                'apache2': {
                    'ini': '/etc/php5/apache2/php.ini',
                },
                'xcache': {
                    'ini': '/etc/php5/mods-available/xcache.ini',
                    'defaults': {},
                },
            },
            'Gentoo' : {
                'pkgs': {
                    'adodb': 'dev-php/adodb',
                    'apache2': [{'name': 'dev-lang/php','version': ':' + php_version + '[apache2]'}],
                    'apc': [{'name': 'dev-php/pecl-apcu_bc','uses': '[php_targets_php' + useversion + ']'}],
                    'apcu': [{'name': 'dev-php/pecl-apcu', 'uses': '[php_targets_php' + useversion + ']'}],
                    'bcmath': [{'name': 'dev-lang/php','version': ':' + php_version + '[bcmath]'}],
                    'bz2': [{'name': 'dev-lang/php','version': ':' + php_version + '[bzip2]'}],
                    'cache-lite': 'dev-php/PEAR-Cache_Lite',
                    'cgi': [{'name': 'dev-lang/php','version': ':' + php_version + '[cgi]'}],
                    'cli': [{'name': 'dev-lang/php','version': ':' + php_version + '[cli]'}],
                    'composer': 'dev-php/composer',
                    'composer_bin': 'composer',
                    'console-table': 'dev-php/PEAR-Console_Table',
                    'ctype': [{'name': 'dev-lang/php','version': ':' + php_version + '[ctype]'}],
                    'curl': [{'name': 'dev-lang/php','version': ':' + php_version + '[curl]'}],
                    'ext_conf_path': '/etc/php/fpm-php' + php_version + '/ext',
                    'fileinfo': [{'name': 'dev-lang/php','version': ':' + php_version + '[fileinfo]'}],
                    'filter': [{'name': 'dev-lang/php','version': ':' + php_version + '[filter]'}],
                    'fpm': [{'name': 'dev-lang/php','version': ':' + php_version + '[fpm]'}],
                    'gd': [{'name': 'dev-lang/php','version': ':' + php_version + '[gd]'}],
                    'geoip': [{'name': 'dev-php/pecl-geoip','uses': '[php_targets_php' + useversion + ']'}],
                    'gettext': 'dev-php/PEAR-File_Gettext',
                    'gmp': [{'name': 'dev-lang/php','version': ':' + php_version + '[gmp]'}],
                    'hash': [{'name': 'dev-lang/php','version': ':' + php_version + '[hash]'}],
                    'iconv': [{'name': 'dev-lang/php','version': ':' + php_version + '[iconv]'}],
                    'imagick': [{'name': 'dev-php/pecl-imagick','uses': '[php_targets_php' + useversion + ']'}],
                    'imap': [{'name': 'dev-lang/php','version': ':' + php_version + '[imap]'}],
                    'intl': [{'name': 'dev-lang/php','version': ':' + php_version + '[intl]'}],
                    'json': [{'name': 'dev-lang/php','version': ':' + php_version + '[json]'}],
                    'ldap': [{'name': 'dev-lang/php','version': ':' + php_version + '[ldap]'}],
                    'local_bin': '/usr/local/bin',
                    'auth-sasl': 'dev-php/PEAR-Auth_SASL',
                    'mail': 'dev-php/PHPMailer',
                    'memcache': [{'name': 'dev-php/pecl-memcache','uses': '[php_targets_php' + useversion + ']'}],
                    'memcached': [{'name': 'dev-php/pecl-memcached','uses': '[php_targets_php' + useversion + ']'}],
                    'mcrypt': [{'name': 'dev-php/pecl-mcrypt','uses': '[php_targets_php' + useversion + ']'}],
                    'mongo': [{'name': 'dev-php/pecl-mongo','uses': '[php_targets_php' + useversion + ']'}],
                    'mongodb': [{'name': 'dev-php/pecl-mongodb','uses': '[php_targets_php' + useversion + ']'}],
                    'mysqlnd': [{'name': 'dev-lang/php','version': ':' + php_version + '[mysql]'}],
                    'mysql': [{'name': 'dev-lang/php','version': ':' + php_version + '[mysqli]'}],
                    'net-smtp': 'dev-php/PEAR-Net_SMTP',
                    'net4': 'dev-php/PEAR-Net_IPv4',
                    'net6': 'dev-php/PEAR-Net_IPv6',
                    'oauth': [{'name': 'dev-php/pecl-oauth','uses': '[php_targets_php' + useversion + ']'}],
                    'opcache': [{'name': 'dev-lang/php','version': ':' + php_version + '[opcache]'}],
                    'pear': 'dev-php/pear',
                    'pgsql': [{'name': 'dev-lang/php','version': ':' + php_version + '[postgres]'}],
                    'php': [{'name': 'dev-lang/php','version': ':' + php_version}],
                    'pspell': [{'name': 'dev-lang/php','version': ':' + php_version + '[spell]'}],
                    'redis': [{'name': 'dev-php/pecl-redis','uses': '[php_targets_php' + useversion + ']'}],
                    'session': [{'name': 'dev-lang/php','version': ':' + php_version + '[session]'}],
                    'snmp': [{'name': 'dev-lang/php','version': ':' + php_version + '[snmp]'}],
                    'soap': [{'name': 'dev-lang/php','version': ':' + php_version + '[soap]'}],
                    'ssh2': [{'name': 'dev-php/pecl-ssh2','uses': '[php_targets_php' + useversion + ']'}],
                    'sqlite': [{'name': 'dev-lang/php','version': ':' + php_version + '[sqlite]'}],
                    'tcpdf': 'dev-php/tcpdf',
                    'temp_dir': '/tmp',
                    'tidy': [{'name': 'dev-lang/php','version': ':' + php_version + '[tidy]'}],
                    'tokenizer': [{'name': 'dev-lang/php','version': ':' + php_version + '[tokenizer]'}],
                    'uuid': [{'name': 'dev-php/pecl-uuid','uses': '[php_targets_php' + useversion + ']'}],
                    'xdebug': [{'name': 'dev-php/xdebug','uses': '[php_targets_php' + useversion + ']'}],
                    'xml': [{'name': 'dev-lang/php','version': ':' + php_version + '[xml]'}],
                    'xmlwriter': [{'name': 'dev-lang/php','version': ':' + php_version + '[xmlwriter]'}],
                    'xsl': [{'name': 'dev-lang/php','version': ':' + php_version + '[xslt]'}],
                    'zip': [{'name': 'dev-lang/php','version': ':' + php_version + '[zip]'}],
                },
                'fpm': {
                    'conf': '/etc/php/fpm-php' + php_version + '/php-fpm.conf',
                    'ini': '/etc/php/fpm-php' + php_version + '/php.ini',
                    'pools': '/etc/php/fpm-php' + php_version + '/fpm.d',
                    'service': 'php-fpm',
                    'user': 'root',
                    'group': 'root',
                    'defaults': odict([
                        ('global', odict([
                            ('pid', '/var/run/php-fpm-php' + php_version + '.pid'),
                            ('error_log', '/var/log/php' + php_version + '-fpm.log'),
                        ])),
                        ('include', '/etc/php/fpm-php' + php_version + '/fpm.d/*.conf'),
                    ]),
                },
                'cli': {
                    'ini': '/etc/php/cli-php' + php_version + '/php.ini',
                },
                'apache2': {
                    'ini': '/etc/php/apache2-php' + php_version + '/php.ini',
                },
            },
            'RedHat': {
                'pkgs': {
                    'adodb': 'php-adodb',
                    'apc': 'php-pecl-apc',
                    'apcu': rh_prefix + 'php-pecl-apcu',
                    'bcmath': rh_prefix + 'php-bcmath',
                    'build_pkgs': ['openssl-devel', 'gcc'],
                    'cache-lite': 'php-pear-Cache-Lite',
                    'cgi': rh_prefix + 'php-cgi',
                    'cli': rh_prefix + 'php-cli',
                    'composer': 'composer',
                    'composer_bin': 'composer',
                    'console-table': 'php-pear-Console-Table',
                    'curl': [rh_prefix + 'php-common', 'curl'],
                    'dba': [rh_prefix + 'php-dba', 'dba'],
                    'dev': rh_prefix + 'php-devel',
                    'ext_conf_path': '/etc/' + path_suffix + 'php.d',
                    'fpm': rh_prefix + 'php-fpm',
                    'gd': rh_prefix + 'php-gd',
                    'geoip': sclo_prefix + 'php-pecl-geoip',
                    'geshi': 'php-geshi',
                    'gettext': 'php-php-gettext',
                    'http': sclo_prefix + 'php-pecl-http',
                    'imagick': sclo_prefix + 'php-pecl-imagick',
                    'imap': sclo_prefix + 'php-imap',
                    'intl': rh_prefix + 'php-intl',
                    'json': rh_prefix + 'php-common',
                    'ldap': rh_prefix + 'php-ldap',
                    'local_bin': '/usr/local/bin',
                    'auth-sasl': 'php-pear-Auth-SASL',
                    'mail': 'php-pear-Mail',
                    'mbstring': rh_prefix + 'php-mbstring',
                    'mcrypt': sclo_prefix + 'php-mcrypt',
                    'memcache': 'php-pecl-memcache',
                    'memcached': sclo_prefix + 'php-pecl-memcached',
                    'mysql': 'php-mysql',
                    'mysqlnd': rh_prefix + 'php-mysqlnd',
                    'net-smtp': 'php-pear-Net-SMTP',
                    'net4': 'php-pear-Net-IPv4',
                    'oauth': 'php-pecl-oauth',
                    'opcache': rh_prefix + 'php-opcache' if salt['pillar.get']('php:use_scl_repo', False) else 'php-pecl-zendopcache',
                    'pear': rh_prefix + 'php-pear',
                    'pgsql': rh_prefix + 'php-pgsql',
                    'php': rh_prefix + 'php',
                    'pspell': rh_prefix + 'php-pspell',
                    'redis': sclo_prefix + 'php-pecl-redis',
                    'seclib': 'php-phpseclib',
                    'snmp': rh_prefix + 'php-snmp',
                    'soap': rh_prefix + 'php-soap',
                    'sqlite': rh_prefix + 'php-pdo',
                    'ssh2': sclo_prefix + 'php-pecl-ssh2',
                    'suhosin5_ext': 'suhosin.so',
                    'suhosin5_repo': 'https://github.com/sektioneins/suhosin',
                    'suhosin7_ext': 'suhosin7.so',
                    'suhosin7_repo': 'https://github.com/sektioneins/suhosin7',
                    'tcpdf': 'php-tcpdf',
                    'temp_dir': '/tmp',
                    'tidy': sclo_prefix + 'php-tidy',
                    'uuid': sclo_prefix + 'php-pecl-uuid',
                    'xcache': 'php-xcache',
                    'xdebug': sclo_prefix + 'php-pecl-xdebug',
                    'xml': [rh_prefix + 'php-xml', rh_prefix + 'php-xmlrpc'],
                    'xsl': rh_prefix + 'php-xml',
                    'zip': rh_prefix + 'php',
                },
                'fpm': {
                    'conf': '/etc/' + path_suffix + 'php-fpm.conf',
                    'ini': '/etc/' + path_suffix + 'php.ini',
                    'pools': '/etc/' + path_suffix + 'php-fpm.d',
                    'service': rh_prefix + 'php-fpm',
                    'user': 'root',
                    'group': 'root',
                    'defaults': {
                        'global': {
                            'pid': '/var/' + path_suffix + 'run/php-fpm/php-fpm.pid',
                            'error_log': '/var/' + path_suffix + 'log/php-fpm/error.log',
                        },
                        'include': '/etc/' + path_suffix + 'php-fpm.d/*.conf',
                    },
                },
                'cli': {
                    'ini': '/etc/' + path_suffix + 'php.ini',
                },
                'xcache': {
                    'ini': '/etc/' + path_suffix + 'php.d/xcache.ini',
                },
            },
            'Suse': {
                'pkgs': {
                    'adodb': 'php8-dba',
                    'apache2': 'apache2-mod_php8',
                    'cli': 'php8',
                    'curl': 'php8-curl',
                    'fpm': 'php8-fpm',
                    'gd': 'php8-gd',
                    'imap': 'php8-imap',
                    'intl': 'php8-intl',
                    'json': 'php8-json',
                    'ldap': 'php8-ldap',
                    'mbstring': 'php8-mbstring',
                    'mcrypt': 'php8-mcrypt',
                    'mysql': 'php8-mysql',
                    'oauth': 'php8-oauth',
                    'pear': 'php8-pear',
                    'pgsql': 'php8-pgsql',
                    'php': 'php8',
                    'snmp': 'php8-snmp',
                    'soap': 'php8-soap',
                    'sqlite': 'php8-sqlite',
                    'suhosin': 'php8-suhosin',
                    'xml': ['php8-xmlreader','php8-xmlwriter','php8-xmlrpc'],
                    'zip': 'php8-zip',
                },
                'fpm': {
                    'conf': '/etc/php8/fpm/php-fpm.conf',
                    'ini': '/etc/php8/conf.d/salt.ini',
                    'pools': '/etc/php8/fpm/php-fpm.d',
                    'service': 'php-fpm',
                    'user': 'root',
                    'group': 'root',
                    'defaults': {
                        'include': '/etc/php8/fpm/php-fpm.d/*.conf',
                    },
                },
                'cli': {
                    'ini': '/etc/php8/cli/php.ini',
                },
            },
            'Arch': {
                'pkgs': {
                    'apc': 'php-apcu',
                    'apcu': 'php-apcu-bc',
                    'cgi': 'php-cgi',
                    'cli': 'php',
                    'composer_bin': 'composer',
                    'curl': 'curl',
                    'fpm': 'php-fpm',
                    'gd': 'php-gd',
                    'geoip': 'php-geoip',
                    'imap': 'php-imap',
                    'intl': 'php-intl',
                    'local_bin': '/usr/local/bin',
                    'mcrypt': 'php-mcrypt',
                    'memcache': 'php-memcache',
                    'memcached': 'php-memcached',
                    'pgsql': 'php-pgsql',
                    'php': 'php',
                    'pspell': 'php-pspell',
                    'snmp': 'php-snmp',
                    'sqlite': 'php-sqlite',
                    'temp_dir': '/tmp',
                    'tidy': 'php-tidy',
                    'xcache': 'php-xcache',
                    'xdebug': 'xdebug',
                    'xsl': 'php-xsl',
                },
                'fpm': {
                    'conf': '/etc/php/php-fpm.conf',
                    'ini': '/etc/php/php.ini',
                    'pools': '/etc/php/fpm.d',
                    'service': 'php-fpm',
                    'user': 'root',
                    'group': 'root',
                    'defaults': {
                        'global': {
                            'pid': '/run/php-fpm/php-fpm.pid',
                            'error_log': 'log/php-fpm.log',
                        },
                        'include': '/etc/php/fpm.d/*.conf',
                    },
                },
                'cli': {
                    'ini': '/etc/php/php-cli.ini',
                },
                'xcache': {
                    'ini': '/etc/php/conf.d/xcache.ini',
                },
            },
            'FreeBSD': {
                'apache2': {
                    'ini': '/usr/local/etc/php.ini',
                    'module_config': '/usr/local/etc/apache24/modules.d/050_mod_php.conf',
                    'name': 'apache24',
                },
                'cli': {
                    'ini': '/usr/local/etc/php.ini'
                },
                'composer': {
                    'required_modules': [
                      'filter',
                      'json',
                      'mbstring',
                      'openssl',
                      'phar',
                    ],
                },
                'pkgs': {
                    'apache2': 'mod_php' + freebsd_php_version,
                    'bcmath': 'php' + freebsd_php_version + '-bcmath',
                    'composer_bin': 'composer',
                    'cli': 'php' + freebsd_php_version,
                    'ctype': 'php' + freebsd_php_version + '-ctype',
                    'curl': 'php' + freebsd_php_version + '-curl',
                    'dom': 'php' + freebsd_php_version + '-dom',
                    'filter': 'php' + freebsd_php_version + '-filter',
                    'fileinfo': 'php' + freebsd_php_version + '-fileinfo',
                    'fpm': 'php' + freebsd_php_version,
                    'gettext': 'php' + freebsd_php_version + '-gettext',
                    'gd': 'php' + freebsd_php_version + '-gd',
                    'hash': 'php' + freebsd_php_version + '-hash',
                    'iconv': 'php' + freebsd_php_version + '-iconv',
                    'imagick': 'php' + freebsd_php_version + '-pecl-imagick',
                    'imap': 'php' + freebsd_php_version + '-imap',
                    'intl': 'php' + freebsd_php_version + '-intl',
                    'json': 'php' + freebsd_php_version + '-json',
                    'ldap': 'php' + freebsd_php_version + '-ldap',
                    'local_bin': '/usr/local/bin',
                    'memcached': 'php' + freebsd_php_version + '-pecl-memcached',
                    'mbstring': 'php' + freebsd_php_version + '-mbstring',
                    'mcrypt': 'php' + freebsd_php_version + '-mcrypt',
                    'mysql': 'php' + freebsd_php_version + '-mysqli',
                    'opcache': 'php' + freebsd_php_version + '-opcache',
                    'openssl': 'php' + freebsd_php_version + '-openssl',
                    'pdo': 'php' + freebsd_php_version + '-pdo',
                    'pdo_mysql': 'php' + freebsd_php_version + '-pdo_mysql',
                    'pear': 'php' + freebsd_php_version + '-pear',
                    'php': 'php' + freebsd_php_version,
                    'phar': 'php' + freebsd_php_version + '-phar',
                    'posix': 'php' + freebsd_php_version + '-posix',
                    'session': 'php' + freebsd_php_version + '-session',
                    'simplexml': 'php' + freebsd_php_version + '-simplexml',
                    'snmp': 'php' + freebsd_php_version + '-snmp',
                    'soap': 'php' + freebsd_php_version + '-soap',
                    'temp_dir': '/tmp',
                    'tokenizer': 'php' + freebsd_php_version + '-tokenizer',
                    'xdebug': 'php' + freebsd_php_version + '-pecl-xdebug',
                    'xml': ['php' + freebsd_php_version + '-xml','php' + freebsd_php_version + '-xmlreader','php' + freebsd_php_version + '-xmlrpc'],
                    'xmlwriter': 'php' + freebsd_php_version + '-xmlwriter',
                    'xsl': 'php' + freebsd_php_version + '-xsl',
                    'zip': 'php' + freebsd_php_version + '-zip',
                    'zlib': 'php' + freebsd_php_version + '-zlib',
                },
                'fpm': {
                    'conf': '/usr/local/etc/php-fpm.conf',
                    'ini': '/usr/local/etc/php.ini',
                    'pools': '/usr/local/etc/php-fpm.d',
                    'service': 'php-fpm',
                    'user': 'root',
                    'group': 'wheel',
                    'defaults': {
                        'global': {
                            'pid': 'run/php-fpm.pid',
                            'error_log': 'log/php-fpm.log',
                        },
                        'include': '/usr/local/etc/php-fpm.d/*.conf',
                    },
                },
            },
        }),
        'fpm': {
            'service': {
                'enabled': True,
                'opts': {},
            },
            'config': {
                'ini': {
                    'opts': {},
                    'settings': {},
                },
                'conf': {
                    'opts': {},
                    'settings': {},
                },
            },
            'pools': {
                'default.conf': {
                    'enabled': False,
                    'opts': {},
                },
            },
        },
        'hhvm': {
            'service': {
                'enabled': True,
                'opts': {},
            },
            'config': {
                'server': {
                    'opts': {},
                    'settings': {},
                },
                'php': {
                    'opts': {},
                    'settings': {},
                },
            },
        },
        'cli': {
            'ini': {
                'opts': {},
                'settings': {},
            }
        },
        'apache2': {
            'ini': {
                'opts': {},
                'settings': {},
            }
        },
        'xcache': {
            'ini': {
                'defaults': {
                    'xcache-common': {
                        'extension':  'xcache.so',
                    },
                    'xcache.admin': {
                        'xcache.admin.enable_auth': 'On',
                    },
                    'xcache': {
                        'xcache.shm_scheme':  '"mmap"',
                        'xcache.size':  '60M',
                        'xcache.count': '1',
                        'xcache.slots': '8K',
                        'xcache.ttl': '0',
                        'xcache.gc_interval': '0',
                        'xcache.var_size':  '4M',
                        'xcache.var_count': '1',
                        'xcache.var_slots': '8K',
                        'xcache.var_ttl': '0',
                        'xcache.var_maxttl':  '0',
                        'xcache.var_gc_interval': '300',
                        'xcache.var_namespace_mode':  '0',
                        'xcache.var_namespace': '""',
                        'xcache.readonly_protection': 'Off',
                        'xcache.mmap_path': '"/dev/zero"',
                        'xcache.coredump_directory':  '""',
                        'xcache.coredump_type': '0',
                        'xcache.disable_on_crash':  'Off',
                        'xcache.experimental':  'Off',
                        'xcache.cacher':  'On',
                        'xcache.stat':  'On',
                        'xcache.optimizer': 'Off',
                    },
                    'xcache.coverager': {
                        'xcache.coverager': 'Off',
                        'xcache.coverager_autostart': 'On',
                        'xcache.coveragedump_directory':  '""',
                    },
                },
                'opts': {},
                'settings': {},
            }
        },
        'ini': {
            'defaults': {
                'PHP': {
                'engine': 'On',
                    'allow_url_fopen': 'On',
                    'allow_url_include': 'Off',
                    'asp_tags': 'Off',
                    'auto_globals_jit': 'On',
                    'default_mimetype': '"text/html"',
                    'default_socket_timeout': 60,
                    'disable_functions': ['pcntl_alarm','pcntl_fork','pcntl_waitpid','pcntl_wait','pcntl_wifexited','pcntl_wifstopped','pcntl_wifsignaled',
                        'pcntl_wexitstatus','pcntl_wtermsig','pcntl_wstopsig','pcntl_signal','pcntl_signal_dispatch','pcntl_get_last_error','pcntl_strerror',
                        'pcntl_sigprocmask','pcntl_sigwaitinfo','pcntl_sigtimedwait','pcntl_exec','pcntl_getpriority','pcntl_setpriority'],
                    'display_errors': 'Off',
                    'display_startup_errors': 'Off',
                    'enable_dl': 'Off',
                    'error_reporting': ['E_ALL', '~E_DEPRECATED', '~E_STRICT'],
                    'expose_php': 'On',
                    'file_uploads': 'On',
                    'html_errors': 'On',
                    'ignore_repeated_errors': 'Off',
                    'ignore_repeated_source': 'Off',
                    'implicit_flush': 'Off',
                    'log_errors': 'On',
                    'log_errors_max_len': 1024,
                    'max_execution_time': 30,
                    'max_file_uploads': 20,
                    'max_input_nesting_level': 64,
                    'max_input_time': 60,
                    'max_input_vars': 1000,
                    'memory_limit': '128M',
                    'output_buffering': 4096,
                    'post_max_size': '8M',
                    'precision': 14,
                    'register_argc_argv': 'Off',
                    'report_memleaks': 'On',
                    'request_order': 'GP',
                    'serialize_precision': 17,
                    'short_open_tag': 'Off',
                    'track_errors': 'Off',
                    'upload_max_filesize': '2M',
                    'variables_order': 'GPCS',
                    'zend.enable_gc': 'On',
                    'zlib.output_compression': 'Off',
                },
                'CLI Server': {
                    'cli_server.color': 'On'
                },
                'Date': {
                    'date.timezone': 'America/New_York'
                },
                'Pdo_mysql': {
                    'pdo_mysql.cache_size': 2000
                },
                'mail function': {
                    'SMTP': 'localhost',
                    'mail.add_x_header': 'On'
                },
                'SQL': {
                    'sql.safe_mode': 'Off'
                },
                'ODBC': {
                    'odbc.allow_persistent': 'On',
                    'odbc.check_persistent': 'On',
                    'odbc.max_persistent': '-1',
                    'odbc.max_links': '-1',
                    'odbc.defaultlrl': 4096,
                    'odbc.defaultbinmode': 1
                },
                'Interbase': {
                    'ibase.allow_persistent': 1,
                    'ibase.max_persistent': -1,
                    'ibase.max_links': -1,
                    'ibase.timestampformat': '"%Y-%m-%d %H:%M:%S"',
                    'ibase.dateformat': '"%Y-%m-%d"',
                    'ibase.timeformat': '"%H:%M:%S"'
                },
                'MySQL': {
                    'mysql.allow_local_infile': 'On',
                    'mysql.allow_persistent': 'On',
                    'mysql.cache_size': '2000',
                    'mysql.max_persistent': -1,
                    'mysql.max_links': -1,
                    'mysql.connect_timeout': 60,
                    'mysql.trace_mode': 'Off'
                },
                'MySQLi': {
                    'mysqli.max_persistent': -1,
                    'mysqli.allow_persistent': 'On',
                    'mysqli.max_links': -1,
                    'mysqli.cache_size': 2000,
                    'mysqli.default_port': 3306,
                    'mysqli.reconnect': 'Off'
                },
                'mysqlnd': {
                    'mysqlnd.collect_statistics': 'On',
                    'mysqlnd.collect_memory_statistics': 'Off'
                },
                'PostgreSQL': {
                    'pgsql.allow_persistent': 'On',
                    'pgsql.auto_reset_persistent': 'Off',
                    'pgsql.max_persistent': -1,
                    'pgsql.max_links': -1,
                    'pgsql.ignore_notice': 0,
                    'pgsql.log_notice': 0
                },
                'Sybase-CT': {
                    'sybct.allow_persistent': 'On',
                    'sybct.max_persistent': -1,
                    'sybct.max_links': -1,
                    'sybct.min_server_severity': 10,
                    'sybct.min_client_severity': 10
                },
                'bcmath': {
                    'bcmath.scale': 0
                },
                'Session': {
                    'session.save_handler': 'files',
                    'session.use_strict_mode': 0,
                    'session.use_cookies': 1,
                    'session.use_only_cookies': 1,
                    'session.name': 'PHPSESSID',
                    'session.auto_start': 0,
                    'session.cookie_lifetime': 0,
                    'session.cookie_path': '/',
                    'session.serialize_handler': 'php',
                    'session.gc_probability': 0,
                    'session.gc_divisor': 1000,
                    'session.gc_maxlifetime': 1440,
                    'session.bug_compat_42': 'Off',
                    'session.bug_compat_warn': 'Off',
                    'session.cache_limiter': 'nocache',
                    'session.cache_expire': '180',
                    'session.use_trans_sid': 0,
                    'session.hash_function': 0,
                    'session.hash_bits_per_character': 5,
                    'url_rewriter.tags': '"a=href,area=href,frame=src,input=src,form=fakeentry"'
                },
                'MSSQL': {
                    'mssql.allow_persistent': 'On',
                    'mssql.max_persistent': -1,
                    'mssql.max_links': -1,
                    'mssql.min_error_severity': 10,
                    'mssql.min_message_severity': 10,
                    'mssql.compatibility_mode': 'Off',
                    'mssql.secure_connection': 'Off'
                },
                'Tidy': {
                    'tidy.clean_output': 'Off'
                },
                'soap': {
                    'soap.wsdl_cache_enabled': 1,
                    'soap.wsdl_cache_dir': '"/tmp"',
                    'soap.wsdl_cache_ttl': 86400,
                    'soap.wsdl_cache_limit': 5
                },
                'ldap': {
                    'ldap.max_links': -1
                },
            },
        },
    }, merge=True) %}
{%- endif %}
